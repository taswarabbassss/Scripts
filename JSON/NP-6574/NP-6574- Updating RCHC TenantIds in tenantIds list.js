//EXECUTED OVER QA

const collectionName = "service";
const services = db
  .getCollection(collectionName)
  .find({
    tenantIds: { $exists: true, $type: "array" },
    $expr: { $gte: [{ $size: "$tenantIds" }, 1] },
    tenantIds: { $nin: ["62c6b4194d73ddd13b54f9d9"] },
  })
  .toArray();
let updatedIds = [];

services.forEach((service) => {
  let localIds = service.tenantIds;
  localIds.push("62c6b4194d73ddd13b54f9d9");
  try {
    db.getCollection(collectionName).updateOne(
      { _id: service._id },
      { $set: { tenantIds: localIds } }
    );
    updatedIds.push(service._id + "");
  } catch (e) {
    print("ERROR IN OBJECTID: " + service._id);
    print(e);
  }
  print(".");
});

print(updatedIds.length + " Documents Updated");
print(updatedIds);

// RESULTS AFTER EXECUTION OVER QA
/*
391 Documents Updated

['64cb90c68276c144cb86b39a','64cb90c68276c144cb86b3ba','64cb90c68276c144cb86b3ee','64cb90c68276c144cb86b45b','64cb90c68276c144cb86b491','64cb90c68276c144cb86b3eb','64cb90c68276c144cb86b3aa','64cb90c68276c144cb86b44d','64cb90c68276c144cb86b428','64cb90c68276c144cb86b43e','64cb90c68276c144cb86b42c','64cb90c68276c144cb86b4a7','64cb90c68276c144cb86b4bd','64cb90c68276c144cb86b42f','64cb90c68276c144cb86b44c','64cb90c68276c144cb86b4e8','64cb90c68276c144cb86b4fe','64cb90c68276c144cb86b3e3','64cb90c68276c144cb86b413','64cb90c68276c144cb86b47e','64cb90c68276c144cb86b437','64cb90c68276c144cb86b4bb','64cb90c68276c144cb86b3c6','64cb90c68276c144cb86b405','64cb90c68276c144cb86b3a1','64cb90c68276c144cb86b481','64cb90c68276c144cb86b48c','64cb90c68276c144cb86b4c9','64cb90c68276c144cb86b3d6','64cb90c68276c144cb86b394','64cb90c68276c144cb86b3b4','64cb90c68276c144cb86b3d2','64cb90c68276c144cb86b3f6','64cb90c68276c144cb86b46d','64cb90c68276c144cb86b3bb','64cb90c68276c144cb86b418','64cb90c68276c144cb86b456','64cb90c68276c144cb86b498','64cb90c68276c144cb86b454','64cb90c68276c144cb86b3ad','64cb90c68276c144cb86b3cd','64cb90c68276c144cb86b471','64cb90c68276c144cb86b4c8','64cb90c68276c144cb86b4fc','64cb90c68276c144cb86b3b0','64cb90c68276c144cb86b408','64cb90c68276c144cb86b4a2','64cb90c68276c144cb86b4f0','64cb90c68276c144cb86b425','64cb90c68276c144cb86b4e6','64cb90c68276c144cb86b3ea','64cb90c68276c144cb86b492','64cb90c68276c144cb86b399','64cb90c68276c144cb86b3d9','64cb90c68276c144cb86b3a9','64cb90c68276c144cb86b3ae','64cb90c68276c144cb86b3d7','64cb90c68276c144cb86b395','64cb90c68276c144cb86b414','64cb90c68276c144cb86b3e7','64cb90c68276c144cb86b416','64cb90c68276c144cb86b4d0','64cb90c68276c144cb86b4f8','64cb90c68276c144cb86b39e','64cb90c68276c144cb86b3fe','64cb90c68276c144cb86b430','64cb90c68276c144cb86b45c','64cb90c68276c144cb86b496','64cb90c68276c144cb86b502','64cb90c68276c144cb86b4d5','64cb90c68276c144cb86b39c','64cb90c68276c144cb86b4dc','64cb90c68276c144cb86b4e3','64cb90c68276c144cb86b4dd','64cb90c68276c144cb86b3b1','64cb90c68276c144cb86b47b','64cb90c68276c144cb86b3cf','64cb90c68276c144cb86b44e','64cb90c68276c144cb86b48d','64cb90c68276c144cb86b4c4','64cb90c68276c144cb86b4ae','64cb90c68276c144cb86b3c2','64cb90c68276c144cb86b3c7','64cb90c68276c144cb86b3a0','64cb90c68276c144cb86b3e0','64cb90c68276c144cb86b457','64cb90c68276c144cb86b4db','64cb90c68276c144cb86b3f8','64cb90c68276c144cb86b39b','64cb90c68276c144cb86b3b5','64cb90c68276c144cb86b46f','64cb90c68276c144cb86b3cb','64cb90c68276c144cb86b400','64cb90c68276c144cb86b4ba','64cb90c68276c144cb86b3ce','64cb90c68276c144cb86b3ca','64cb90c68276c144cb86b487','64cb90c68276c144cb86b499','64cb90c68276c144cb86b4c7','64cb90c68276c144cb86b4de','64cb90c68276c144cb86b4eb','64cb90c68276c144cb86b4f6','64cb90c68276c144cb86b3d8','64cb90c68276c144cb86b3df','64cb90c68276c144cb86b40e','64cb90c68276c144cb86b3c8','64cb90c68276c144cb86b444','64cb90c68276c144cb86b49f','64cb90c68276c144cb86b4ce','64cb90c68276c144cb86b3a6','64cb90c68276c144cb86b436','64cb90c68276c144cb86b424','64cb90c68276c144cb86b477','64cb90c68276c144cb86b495','64cb90c68276c144cb86b4d2','64cb90c68276c144cb86b401','64cb90c68276c144cb86b48a','64cb90c68276c144cb86b403','64cb90c68276c144cb86b40f','64cb90c68276c144cb86b3f5','64cb90c68276c144cb86b41c','64cb90c68276c144cb86b43c','64cb90c68276c144cb86b3d5','64cb90c68276c144cb86b455','64cb90c68276c144cb86b448','64cb90c68276c144cb86b4ca','64cb90c68276c144cb86b4f3','64cb90c68276c144cb86b40a','64cb90c68276c144cb86b3a4','64cb90c68276c144cb86b42a','64cb90c68276c144cb86b4c0','64cb90c68276c144cb86b4c5','64cb90c68276c144cb86b4f2','64cb90c68276c144cb86b3f7','64cb90c68276c144cb86b441','64cb90c68276c144cb86b445','64cb90c68276c144cb86b3bf','64cb90c68276c144cb86b49b','64cb90c68276c144cb86b3d0','64cb90c68276c144cb86b3e5','64cb90c68276c144cb86b4cf','64cb90c68276c144cb86b4a1','64cb90c68276c144cb86b458','64cb90c68276c144cb86b407','64cb90c68276c144cb86b40b','64cb90c68276c144cb86b45a','64cb90c68276c144cb86b452','64cb90c68276c144cb86b468','64cb90c68276c144cb86b4cb','64cb90c68276c144cb86b410','64cb90c68276c144cb86b3f4','64cb90c68276c144cb86b423','64cb90c68276c144cb86b47f','64cb90c68276c144cb86b4e4','64cb90c68276c144cb86b3f3','64cb90c68276c144cb86b434','64cb90c68276c144cb86b46c','64cb90c68276c144cb86b43f','64cb90c68276c144cb86b451','64cb90c68276c144cb86b47d','64cb90c68276c144cb86b440','64cb90c68276c144cb86b3bd','64cb90c68276c144cb86b3af','64cb90c68276c144cb86b4ed','64cb90c68276c144cb86b4fa','64cb90c68276c144cb86b3c3','64cb90c68276c144cb86b3c4','64cb90c68276c144cb86b3be','64cb90c68276c144cb86b44b','64cb90c68276c144cb86b4a8','64cb90c68276c144cb86b4c3','64cb90c68276c144cb86b3e2','64cb90c68276c144cb86b3d3','64cb90c68276c144cb86b421','64cb90c68276c144cb86b4ab','64cb90c68276c144cb86b4e1','64cb90c68276c144cb86b4ad','64cb90c68276c144cb86b4ff','64cb90c68276c144cb86b443','64cb90c68276c144cb86b446','64cb90c68276c144cb86b406','64cb90c68276c144cb86b431','64cb90c68276c144cb86b4b3','64cb90c68276c144cb86b483','64cb90c68276c144cb86b4e0','64cb90c68276c144cb86b4fd','64cb90c68276c144cb86b3c5','64cb90c68276c144cb86b3ef','64cb90c68276c144cb86b427','64cb90c68276c144cb86b40c','64cb90c68276c144cb86b3f2','64cb90c68276c144cb86b488','64cb90c68276c144cb86b3a2','64cb90c68276c144cb86b3ec','64cb90c68276c144cb86b44f','64cb90c68276c144cb86b4e7','64cb90c68276c144cb86b4f1','64cb90c68276c144cb86b4a9','64cb90c68276c144cb86b41a','64cb90c68276c144cb86b426','64cb90c68276c144cb86b493','64cb90c68276c144cb86b391','64cb90c68276c144cb86b3e8','64cb90c68276c144cb86b42d','64cb90c68276c144cb86b3a8','64cb90c68276c144cb86b41d','64cb90c68276c144cb86b404','64cb90c68276c144cb86b4e9','64cb90c68276c144cb86b503','64cb90c68276c144cb86b41e','64cb90c68276c144cb86b469','64cb90c68276c144cb86b4b1','64cb90c68276c144cb86b42b','64cb90c68276c144cb86b494','64cb90c68276c144cb86b4b5','64cb90c68276c144cb86b3c1','64cb90c68276c144cb86b3c9','64cb90c68276c144cb86b3f0','64cb90c68276c144cb86b3d4','64cb90c68276c144cb86b4d8','64cb90c68276c144cb86b393','64cb90c68276c144cb86b3bc','64cb90c68276c144cb86b3a5','64cb90c68276c144cb86b3d1','64cb90c68276c144cb86b43b','64cb90c68276c144cb86b3fc','64cb90c68276c144cb86b4cd','64cb90c68276c144cb86b4ef','64cb90c68276c144cb86b415','64cb90c68276c144cb86b45e','64cb90c68276c144cb86b4aa','64cb90c68276c144cb86b4f9','64cb90c68276c144cb86b4be','64cb90c68276c144cb86b3ff','64cb90c68276c144cb86b39f','64cb90c68276c144cb86b3dc','64cb90c68276c144cb86b429','64cb90c68276c144cb86b439','64cb90c68276c144cb86b482','64cb90c68276c144cb86b4e5','64cb90c68276c144cb86b392','64cb90c68276c144cb86b473','64cb90c68276c144cb86b48e','64cb90c68276c144cb86b4d7','64cb90c68276c144cb86b463','64cb90c68276c144cb86b47c','64cb90c68276c144cb86b3de','64cb90c68276c144cb86b3b9','64cb90c68276c144cb86b435','64cb90c68276c144cb86b447','64cb90c68276c144cb86b4e2','64cb90c68276c144cb86b4b6','64cb90c68276c144cb86b4d6','64cb90c68276c144cb86b467','64cb90c68276c144cb86b3db','64cb90c68276c144cb86b442','64cb90c68276c144cb86b475','64cb90c68276c144cb86b4df','64cb90c68276c144cb86b4c1','64cb90c68276c144cb86b3e1','64cb90c68276c144cb86b396','64cb90c68276c144cb86b4cc','64cb90c68276c144cb86b3a3','64cb90c68276c144cb86b479','64cb90c68276c144cb86b46a','64cb90c68276c144cb86b3fb','64cb90c68276c144cb86b4d4','64cb90c68276c144cb86b476','64cb90c68276c144cb86b3b6','64cb90c68276c144cb86b3fd','64cb90c68276c144cb86b409','64cb90c68276c144cb86b4a3','64cb90c68276c144cb86b3e6','64cb90c68276c144cb86b3ac','64cb90c68276c144cb86b412','64cb90c68276c144cb86b432','64cb90c68276c144cb86b4b9','64cb90c68276c144cb86b3f9','64cb90c68276c144cb86b438','64cb90c68276c144cb86b465','64cb90c68276c144cb86b4d3','64cb90c68276c144cb86b4b2','64cb90c68276c144cb86b4b8','6549efd87100a113e9690141','6549efde7100a113e9690144','6549efe57100a113e9690146','64cb90c68276c144cb86b43a','64cb90c68276c144cb86b397','64cb90c68276c144cb86b489','64cb90c68276c144cb86b474','64cb90c68276c144cb86b49c','64cb90c68276c144cb86b4a4','64cb90c68276c144cb86b501','64cb90c68276c144cb86b42e','64cb90c68276c144cb86b433','64cb90c68276c144cb86b486','64cb90c68276c144cb86b449','64cb90c68276c144cb86b41f','64cb90c68276c144cb86b3fa','64cb90c68276c144cb86b422','64cb90c68276c144cb86b470','64cb90c68276c144cb86b3e4','64cb90c68276c144cb86b464','64cb90c68276c144cb86b3b7','64cb90c68276c144cb86b480','64cb90c68276c144cb86b420','64cb90c68276c144cb86b4f7','64cb90c68276c144cb86b398','64cb90c68276c144cb86b48f','64cb90c68276c144cb86b4bf','64cb90c68276c144cb86b3a7','64cb90c68276c144cb86b4bc','64cb90c68276c144cb86b3ab','64cb90c68276c144cb86b419','64cb90c68276c144cb86b472','64cb90c68276c144cb86b3c0','64cb90c68276c144cb86b3da','64cb90c68276c144cb86b41b','64cb90c68276c144cb86b49e','64cb90c68276c144cb86b49a','64cb90c68276c144cb86b4d9','6549efd77100a113e9690140','6549efe57100a113e9690147','6549efe77100a113e9690148','64cb90c68276c144cb86b3f1','64cb90c68276c144cb86b4b7','64cb90c68276c144cb86b3b2','64cb90c68276c144cb86b49d','64cb90c68276c144cb86b3e9','64cb90c68276c144cb86b4ac','64cb90c68276c144cb86b46b','64cb90c68276c144cb86b43d','64cb90c68276c144cb86b4fb','64cb90c68276c144cb86b417','64cb90c68276c144cb86b461','64cb90c68276c144cb86b4af','64cb90c68276c144cb86b4d1','64cb90c68276c144cb86b4da','64cb90c68276c144cb86b402','64cb90c68276c144cb86b4b4','64cb90c68276c144cb86b450','64cb90c68276c144cb86b484','64cb90c68276c144cb86b4a6','64cb90c68276c144cb86b4ea','64cb90c68276c144cb86b4f4','64cb90c68276c144cb86b411','64cb90c68276c144cb86b3b8','64cb90c68276c144cb86b459','64cb90c68276c144cb86b45d','64cb90c68276c144cb86b4ec','64cb90c68276c144cb86b4c2','64cb90c68276c144cb86b453','6549efd47100a113e969013e','6549efd67100a113e969013f','6549efe97100a113e9690149','6549efed7100a113e969014b','6603c07569b48c4659c49dbc','64cb90c68276c144cb86b4a5','64cb90c68276c144cb86b4ee','64cb90c68276c144cb86b46e','64cb90c68276c144cb86b497','64cb90c68276c144cb86b4f5','64cb90c68276c144cb86b44a','64cb90c68276c144cb86b40d','64cb90c68276c144cb86b462','64cb90c68276c144cb86b3cc','64cb90c68276c144cb86b3dd','64cb90c68276c144cb86b490','64cb90c68276c144cb86b485','64cb90c68276c144cb86b39d','64cb90c68276c144cb86b460','64cb90c68276c144cb86b47a','64cb90c68276c144cb86b3b3','64cb90c68276c144cb86b45f','64cb90c68276c144cb86b466','64cb90c68276c144cb86b4c6','64cb90c68276c144cb86b48b','64cb90c68276c144cb86b500','64cb90c68276c144cb86b478','64cb90c68276c144cb86b4a0','64cb90c68276c144cb86b4b0','64cb90c68276c144cb86b3ed','6549efd97100a113e9690142','6549efdc7100a113e9690143','6549efe17100a113e9690145','6549efec7100a113e969014a','6549efee7100a113e969014c','6549eff07100a113e969014d','65e71990e616690a99b0b57f','65fbe801a041413b3e5a9196','66ab24585d72db73bfa1a924']

*/
